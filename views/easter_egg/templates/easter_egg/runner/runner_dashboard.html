{% extends 'easter_egg/runner/base_egg_runner.html' %}
<html lang="en">

{% block title %}
Runner {{current_user.username}}'s Dashboard
{% endblock %}

{% block style %}
<style>
    .margin_1 {
        margin-left: 10px;
    }
</style>
{% endblock %}


{% block content %}
<div class="margin_1">
    <!--<h1>Runner Dashboard</h1>-->
    <h1>{{current_user.username}}'s Runner Dashboard</h1>
    <p>Pending Orders:</p>
    <div>
        <button id="toggle_button" type="button" onclick="toggle()">Set Active</button>
        <!--<p id="testingNumber"></p>-->
    </div>
    <br>
    <form action="{{url_for('easter_egg_bp.logout_rr')}}" method="post"><input type="submit" value="Log Out"></form>

    <h2>Orders To Deliever</h2>
    <table id="order_table">
        <tr>
            <th>ID</th>
            <th>Time of Order</th>
            <th>Username</th>
            <th>Price</th>
            <th>Order Contents</th>
            <th>Picked Up?</th>
            <th>Delivered?</th>
            <th></th>
        </tr>
        <!-- Loop through rows in table -->
        {% for row in order_table %}
        <!-- build elements in table -->
        <tr>
            <th>{{ row['id'] }}</th>
            <th>{{ row['time'] }}</th>
            <th>{{ row['username'] }}</th>
            <th>{{ row['price'] }}</th>
            <th>{{ row['order contents'] }}</th>
            <th>
                {% if row['picked up'] == row['time'] %}
                no
                {% else %}
                yes
                {% endif %}
            </th><!-- picked up-->
            <th>
                {% if row['delivered'] == row['time'] %}
                no
                {% else %}
                yes
                {% endif %}
            </th><!--delivered-->
            <th><form action={{url_for('.picked_up')}} method="post">
                <input type="number" name="order_id" value={{row['id']}} style="visibility: hidden; width: 0px;">
                <input type="submit" value="Picked Up?">
            </form></th>
        </tr>
        {% endfor %}
    </table>
</div>

<script>
    var testEl = document.getElementById("testingNumber");
    var buttonEl = document.getElementById("toggle_button")

    //toggling effect of button
    var i = 0;
    var toggle = function(){
        i++;
        var b_mod = 1 & i;
        testEl.textContent = b_mod;

        if (b_mod != 0){
            //deactivated state
            buttonEl.innerText = "Set Active"
        } else {
            //activated state
            buttonEl.innerText = "Deactivate"
        }

    };

    toggle();
</script>
{% endblock %}